<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Typing Test</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      color: #fff;
      background: linear-gradient(135deg, #0f0f0f, #1c1c1c);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
    }

    @keyframes gradientBG {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 40px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      margin-top: 50px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }

    h2 {
      text-align: center;
    }

    label, input {
      display: block;
      width: 100%;
      margin-bottom: 15px;
      font-size: 16px;
    }

    input {
      padding: 10px;
      border-radius: 8px;
      border: none;
      outline: none;
      background: #333;
      color: #fff;
    }

    .error {
      color: #ff4d4d;
      margin-bottom: 10px;
      display: none;
    }

    #paragraph {
      background: #222;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 16px;
      line-height: 1.6;
    }

    textarea {
      width: 100%;
      height: 150px;
      font-size: 16px;
      padding: 10px;
      border-radius: 10px;
      background: #333;
      color: white;
      border: none;
      resize: none;
      outline: none;
    }

    button {
      background: #00b894;
      border: none;
      padding: 12px 20px;
      color: white;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
    }

    .timer {
      text-align: right;
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .results {
      background: #2d3436;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }

    .results p {
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ðŸ–‹ Typing Speed Test</h2>

    <div id="user-info">
      <label for="name">Name <span style="color:red">*</span></label>
      <input type="text" id="name" placeholder="Enter your name">
      <div id="nameError" class="error">Please enter a valid name (letters only).</div>

      <label for="email">Email <span style="color:red">*</span></label>
      <input type="email" id="email" placeholder="Enter your email">
      <div id="emailError" class="error">Please enter a valid email address.</div>

      <button onclick="startTyping()">Start Test</button>
    </div>

    <div id="test-area" style="display:none;">
      <div class="timer" id="timer">1:00</div>
      <div id="paragraph"></div>
      <textarea id="typing-box" disabled placeholder="Start typing here..."></textarea>
    </div>

    <div class="results" id="results" style="display:none;"></div>
  </div>

  <script>
    const paragraphs = [
      "Typing is a very important skill that helps improve your productivity. It helps you complete tasks faster and more efficiently. If you type regularly, you can get better day by day. Practicing consistently is the key to mastering typing.",
      "Accuracy and speed are two important things in typing. If you can type accurately, your work will have fewer mistakes. If you type fast, you will save more time. Typing with both speed and accuracy is the goal.",
      "Typing helps people in different careers such as data entry, software development, writing, and customer support. In today's digital world, typing is a must-have skill. Learn to type correctly and with confidence.",
      "Good posture is important while typing. You should sit straight and keep your hands properly on the keyboard. Always keep your eyes on the screen and not on the keyboard while typing.",
      "Consistent practice with typing tests and paragraphs can improve both your accuracy and speed. Aim for a smooth and error-free typing experience. Don't rush, take time to build accuracy first."
    ];

    let currentParaIndex = 0;
    let timer;
    let timeLeft = 60;
    let startTime;

    function startTyping() {
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const nameRegex = /^[a-zA-Z ]+$/;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      let valid = true;

      if (!nameRegex.test(name)) {
        document.getElementById("nameError").style.display = "block";
        valid = false;
      } else {
        document.getElementById("nameError").style.display = "none";
      }

      if (!emailRegex.test(email)) {
        document.getElementById("emailError").style.display = "block";
        valid = false;
      } else {
        document.getElementById("emailError").style.display = "none";
      }

      if (!valid) return;

      // Start typing test
      document.getElementById("user-info").style.display = "none";
      document.getElementById("test-area").style.display = "block";
      document.getElementById("typing-box").disabled = false;
      document.getElementById("typing-box").value = "";
      document.getElementById("paragraph").innerText = paragraphs[currentParaIndex];
      startTime = new Date();
      timeLeft = 60;
      updateTimer();
      timer = setInterval(updateTimer, 1000);
    }

    function updateTimer() {
      const timerDisplay = document.getElementById("timer");
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      timerDisplay.innerText = `${minutes}:${seconds.toString().padStart(2, '0')}`;

      if (timeLeft === 0) {
        clearInterval(timer);
        finishTest();
      }
      timeLeft--;
    }

    function finishTest() {
      const typedText = document.getElementById("typing-box").value.trim();
      const originalText = paragraphs[currentParaIndex];
      const typedWords = typedText.split(/\s+/);
      const originalWords = originalText.split(/\s+/);

      let correct = 0;
      typedWords.forEach((word, i) => {
        if (word === originalWords[i]) correct++;
      });

      const timeTaken = 60;
      const wpm = Math.round((typedWords.length / timeTaken) * 60);
      const accuracy = ((correct / originalWords.length) * 100).toFixed(2);

      document.getElementById("typing-box").disabled = true;
      const resultBox = document.getElementById("results");
      resultBox.innerHTML = `
        <h3>Test Result</h3>
        <p><strong>WPM:</strong> ${wpm}</p>
        <p><strong>Accuracy:</strong> ${accuracy}%</p>
        <p><strong>Total Words Typed:</strong> ${typedWords.length}</p>
        <p><strong>Correct Words:</strong> ${correct}</p>
        <p><strong>Paragraph:</strong> ${currentParaIndex + 1}/10</p>
        <p><strong>User:</strong> ${document.getElementById("name").value} (${document.getElementById("email").value})</p>
      `;
      resultBox.style.display = 'block';

      // prepare for next user
      currentParaIndex = (currentParaIndex + 1) % paragraphs.length;
      document.getElementById("user-info").style.display = "block";
      document.getElementById("test-area").style.display = "none";
      document.getElementById("name").value = "";
      document.getElementById("email").value = "";
    }
  </script>
</body>
</html>
